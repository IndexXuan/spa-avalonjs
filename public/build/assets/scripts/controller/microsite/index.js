define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,needCache=(avalon.illyGlobal.token,!0),index=avalon.define({$id:"index",sliders:[],hots:[],categories:[],visited:!1,fetchRemoteData:function(apiArgs,data,target){index.visited&&needCache||$http.ajax({url:apiBaseUrl+apiArgs+"",headers:{},data:data,success:function(res){index[target]=res},error:function(res){avalon.illyError("ajax error",res)},ajaxFail:function(res){avalon.illyError("ajax failed",res)}})},renderSlider:function(){setTimeout(function(){$("#slider").slider({loop:!0,ready:function(){setTimeout(function(){avalon.$("#slider").style.visibility="visible"},16)},"done.dom":function(){}})},32)}});return avalon.controller(function($ctrl){$ctrl.$onEnter=function(){index.visited=avalon.vmodels.root.currentIsVisited,index.fetchRemoteData("posts/slider",{},"sliders"),index.fetchRemoteData("posts/hot?limit=3",{},"hots"),index.fetchRemoteData("categories/posts",{},"categories")},$ctrl.$onRendered=function(){},$ctrl.$onBeforeUnload=function(){},$ctrl.$vmodels=[]})});
//# sourceMappingURL=index.js.map