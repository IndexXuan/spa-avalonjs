define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,form=(avalon.illyGlobal.token,avalon.define({$id:"form",imgLocalId:"",imgServerId:"",questionText:"",createQuestion:function(){return form.questionText.length<6?void avalon.vmodels.question.showAlert("请增加一些描述，以便老师解答!",2):void $http.ajax({method:"POST",url:apiBaseUrl+"questions",headers:{},data:{questionImage:form.imgServerId,questionText:form.questionText},success:function(){avalon.router.go("question.result.list")},error:function(res){avalon.illyError("ajax error",res),alert("对不起，题目上传失败, 请重试！")},ajaxFail:function(res){avalon.illyError("ajax failed",res)}})}}));return avalon.controller(function($ctrl){$ctrl.$onEnter=function(){var index=avalon.vmodels.index;form.imgLocalId=index&&index.localImgSrc,form.imgServerId=index&&index.serverId},$ctrl.$onRendered=function(){},$ctrl.$onBeforeUnload=function(){avalon.vmodels.index&&(avalon.vmodels.index.localImgSrc=""),avalon.vmodels.form.questionText=""},$ctrl.$vmodels=[]})});
//# sourceMappingURL=form.js.map