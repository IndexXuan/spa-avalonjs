define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,localLimit=(avalon.illyGlobal.token,6),history=avalon.define({$id:"history",isVisited:!1,noContent:!1,noContentText:"还没有做过作业哦，<br/>快去完成作业，得到老师评价吧~",lists:[],isLoading:!1,offset:0,noMoreData:!1,btnShowMore:!1,fetchData:function(data,concat){history.isLoading=!0;var offset,limit=localLimit;offset=history.lists.length||0,$http.ajax({url:apiBaseUrl+"questions?state=1&limit="+limit+"&offset="+offset,data:data,headers:{},dataType:"json",success:function(lists){history.lists=concat===!0?history.lists.concat(lists):lists,setTimeout(function(){var newlists=history.lists;newlists&&0===newlists.length&&(history.noContent=!0)},200),0===lists.length&&(history.noMoreData=!0),history.isLoading=!1},error:function(res){avalon.illyError("history ajax error",res),history.lists.length<=1&&(history.noContent=!0)},ajaxFail:function(res){avalon.illyError("history ajax failed"+res),history.lists.length<=1&&(history.noContent=!0)}})},showMore:function(e){e.preventDefault(),history.fetchData({},!0)}});return history.lists.$watch("length",function(newLength){void 0!=newLength&&localLimit>newLength?(history.btnShowMore=!1,0===newLength&&(history.noContent=!0)):history.btnShowMore=!0}),avalon.controller(function($ctrl){$ctrl.$onBeforeUnload=function(){},$ctrl.$onEnter=function(){avalon.vmodels.result.current="history",history.isVisited=avalon.vmodels.root.currentIsVisited,history.isVisited||history.fetchData()},$ctrl.$onRendered=function(){},$ctrl.$vmodels=[]})});
//# sourceMappingURL=history.js.map