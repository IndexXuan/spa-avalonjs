!function($){$.matchMedia=function(){var mediaId=0,cls="gmu-media-detect",transitionEnd=$.fx.transitionEnd,cssPrefix=$.fx.cssPrefix,$style=$("<style></style>").append("."+cls+"{"+cssPrefix+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(query){var $mediaElem,ret,id=cls+mediaId++,listeners=[];return $style.append("@media "+query+" { #"+id+" { width: 1px; } }\n"),$mediaElem=$('<div class="'+cls+'" id="'+id+'"></div>').appendTo("body").on(transitionEnd,function(){ret.matches=1===$mediaElem.width(),$.each(listeners,function(i,fn){$.isFunction(fn)&&fn.call(ret,ret)})}),ret={matches:1===$mediaElem.width(),media:query,addListener:function(callback){return listeners.push(callback),this},removeListener:function(callback){var index=listeners.indexOf(callback);return~index&&listeners.splice(index,1),this}}}}()}(Zepto),$(function(){$.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger("ortchange")})}),function($){$.parseTpl=function(str,data){var tmpl="var __p=[];with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(match,code){return"',"+code.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(match,code){return"');"+code.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',func=new Function("obj",tmpl);return data?func(data):func}}(Zepto);var gmu=gmu||{version:"@version",$:window.Zepto,staticCall:function($){var proto=$.fn,slice=[].slice,instance=$();return instance.length=1,function(item,fn){return instance[0]=item,proto[fn].apply(instance,slice.call(arguments,2))}}(Zepto)};!function(gmu,$){function eachEvent(events,callback,iterator){(events||"").split(separator).forEach(function(type){iterator(type,callback)})}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function parse(name){var parts=(""+name).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function findHandlers(arr,name,callback,context){var matcher,obj;return obj=parse(name),obj.ns&&(matcher=matcherFor(obj.ns)),arr.filter(function(handler){return!(!handler||obj.e&&handler.e!==obj.e||obj.ns&&!matcher.test(handler.ns)||callback&&handler.cb!==callback&&handler.cb._cb!==callback||context&&handler.ctx!==context)})}function Event(type,props){return this instanceof Event?(props&&$.extend(this,props),this.type=type,this):new Event(type,props)}var slice=[].slice,separator=/\s+/,returnFalse=function(){return!1},returnTrue=function(){return!0};Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,preventDefault:function(){this.isDefaultPrevented=returnTrue},stopPropagation:function(){this.isPropagationStopped=returnTrue}},gmu.event={on:function(name,callback,context){var set,me=this;return callback?(set=this._events||(this._events=[]),eachEvent(name,callback,function(name,callback){var handler=parse(name);handler.cb=callback,handler.ctx=context,handler.ctx2=context||me,handler.id=set.length,set.push(handler)}),this):this},one:function(name,callback,context){var me=this;return callback?(eachEvent(name,callback,function(name,callback){var once=function(){return me.off(name,once),callback.apply(context||me,arguments)};once._cb=callback,me.on(name,once,context)}),this):this},off:function(name,callback,context){var events=this._events;return events?name||callback||context?(eachEvent(name,callback,function(name,callback){findHandlers(events,name,callback,context).forEach(function(handler){delete events[handler.id]})}),this):(this._events=[],this):this},trigger:function(evt){var args,events,stoped,len,ev,i=-1;if(!this._events||!evt)return this;if("string"==typeof evt&&(evt=new Event(evt)),args=slice.call(arguments,1),evt.args=args,args.unshift(evt),events=findHandlers(this._events,evt.type))for(len=events.length;++i<len;)if((stoped=evt.isPropagationStopped())||!1===(ev=events[i]).cb.apply(ev.ctx2,args)){stoped||(evt.stopPropagation(),evt.preventDefault());break}return this}},gmu.Event=Event}(gmu,gmu.$),function(gmu,$,undefined){function isPlainObject(obj){return"[object Object]"===toString.call(obj)}function eachObject(obj,iterator){obj&&Object.keys(obj).forEach(function(key){iterator(key,obj[key])})}function parseData(data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(data)?JSON.parse(data):data}catch(ex){data=undefined}return data}function getDomOptions(el){for(var key,data,ret={},attrs=el&&el.attributes,len=attrs&&attrs.length;len--;)data=attrs[len],key=data.name,"data-"===key.substring(0,5)&&(key=key.substring(5),data=parseData(data.value),data===undefined||(ret[key]=data));return ret}function zeptolize(name){var key=name.substring(0,1).toLowerCase()+name.substring(1),old=$.fn[key];$.fn[key]=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el,name)||new gmu[name](el,isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("组件没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this},$.fn[key].noConflict=function(){return $.fn[key]=old,this}}function loadOption(klass,opts){var me=this;klass.superClass&&loadOption.call(me,klass.superClass,opts),eachObject(record(klass,"options"),function(key,option){option.forEach(function(item){var condition=item[0],fn=item[1];("*"===condition||$.isFunction(condition)&&condition.call(me,opts[key])||condition===opts[key])&&fn.call(me)})})}function loadPlugins(klass,opts){var me=this;klass.superClass&&loadPlugins.call(me,klass.superClass,opts),eachObject(record(klass,"plugins"),function(opt,plugin){opts[opt]!==!1&&(eachObject(plugin,function(key,val){var oringFn;me[key]=$.isFunction(val)&&(oringFn=me[key])?function(){var ret,origin=me.origin;return me.origin=oringFn,ret=val.apply(me,arguments),origin===undefined?delete me.origin:me.origin=origin,ret}:val}),plugin._init.call(me))})}function mergeObj(){for(var last,args=slice.call(arguments),i=args.length;i--;)last=last||args[i],isPlainObject(args[i])||args.splice(i,1);return args.length?$.extend.apply(null,[!0,{}].concat(args)):last}function bootstrap(name,klass,uid,el,options){var opts,me=this;return isPlainObject(el)&&(options=el,el=undefined),options&&options.el&&(el=$(options.el)),el&&(me.$el=$(el),el=me.$el[0]),opts=me._options=mergeObj(klass.options,getDomOptions(el),options),me.template=mergeObj(klass.template,opts.template),me.tpl2html=mergeObj(klass.tpl2html,opts.tpl2html),me.widgetName=name.toLowerCase(),me.eventNs="."+me.widgetName+uid,me._init(opts),me._options.setup=me.$el&&me.$el.parent()[0]?!0:!1,loadOption.call(me,klass,opts),loadPlugins.call(me,klass,opts),me._create(),me.trigger("ready"),el&&record(el,name,me)&&me.on("destroy",function(){record(el,name,null)}),me}function createClass(name,object,superClass){function klass(el,options){if("Base"===name)throw new Error("Base类不能直接实例化");return this instanceof klass?bootstrap.call(this,name,klass,uuid++,el,options):new klass(el,options)}"function"!=typeof superClass&&(superClass=gmu.Base);var uuid=1,suid=1;return $.extend(klass,{register:function(name,obj){var plugins=record(klass,"plugins")||record(klass,"plugins",{});return obj._init=obj._init||blankFn,plugins[name]=obj,klass},option:function(option,value,method){var options=record(klass,"options")||record(klass,"options",{});return options[option]||(options[option]=[]),options[option].push([value,method]),klass},inherits:function(obj){return createClass(name+"Sub"+suid++,obj,klass)},extend:function(obj){var proto=klass.prototype,superProto=superClass.prototype;staticlist.forEach(function(item){obj[item]=mergeObj(superClass[item],obj[item]),obj[item]&&(klass[item]=obj[item]),delete obj[item]}),eachObject(obj,function(key,val){proto[key]="function"==typeof val&&superProto[key]?function(){var ret,$super=this.$super;return this.$super=function(){var args=slice.call(arguments,1);return superProto[key].apply(this,args)},ret=val.apply(this,arguments),$super===undefined?delete this.$super:this.$super=$super,ret}:val})}}),klass.superClass=superClass,klass.prototype=Object.create(superClass.prototype),klass.extend(object),klass}var slice=[].slice,toString=Object.prototype.toString,blankFn=function(){},staticlist=["options","template","tpl2html"],record=function(){var data={},id=0,ikey="_gid";return function(obj,key,val){var dkey=obj[ikey]||(obj[ikey]=++id),store=data[dkey]||(data[dkey]={});return val!==undefined&&(store[key]=val),null===val&&delete store[key],store[key]}}(),event=gmu.event;gmu.define=function(name,object,superClass){gmu[name]=createClass(name,object,superClass),zeptolize(name)},gmu.isWidget=function(obj,klass){return klass="string"==typeof klass?gmu[klass]||blankFn:klass,klass=klass||gmu.Base,obj instanceof klass},gmu.Base=createClass("Base",{_init:blankFn,_create:blankFn,getEl:function(){return this.$el},on:event.on,one:event.one,off:event.off,trigger:function(name){var evt="string"==typeof name?new gmu.Event(name):name,args=[evt].concat(slice.call(arguments,1)),opEvent=this._options[evt.type],$el=this.getEl();return opEvent&&$.isFunction(opEvent)&&!1===opEvent.apply(this,args)&&(evt.stopPropagation(),evt.preventDefault()),event.trigger.apply(this,args),$el&&$el.triggerHandler(evt,(args.shift(),args)),this},tpl2html:function(subpart,data){var tpl=this.template;return tpl="string"==typeof subpart?tpl[subpart]:(data=subpart,tpl),data||~tpl.indexOf("<%")?$.parseTpl(tpl,data):tpl},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),$.ui=gmu}(gmu,gmu.$),function(gmu,$){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd,translateZ=" translateZ(0)";gmu.define("Slider",{options:{loop:!1,speed:400,index:0,selector:{container:".ui-slider-group"}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>"><img src="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>'},_create:function(){var me=this,$el=me.getEl(),opts=me._options;me.index=opts.index,me._initDom($el,opts),me._initWidth($el,me.index),me._container.on(transitionEnd+me.eventNs,$.proxy(me._tansitionEnd,me)),$(window).on("ortchange"+me.eventNs,function(){me._initWidth($el,me.index)})},_initDom:function($el,opts){var items,container,selector=opts.selector,viewNum=opts.viewNum||1;for(container=$el.find(selector.container),container.length||(container=$("<div></div>"),opts.content?this._createItems(container,opts.content):$el.is("ul")?(this.$el=container.insertAfter($el),container=$el,$el=this.$el):container.append($el.children()),container.appendTo($el)),(items=container.children()).length<viewNum+1&&(opts.loop=!1);opts.loop&&container.children().length<3*viewNum;)container.append(items.clone());this.length=container.children().length,this._items=(this._container=container).addClass("ui-slider-group").children().addClass("ui-slider-item").toArray(),this.trigger("done.dom",$el.addClass("ui-slider"),opts)},_createItems:function(container,items){for(var i=0,len=items.length;len>i;i++)container.append(this.tpl2html("item",items[i]))},_initWidth:function($el,index,force){var width,me=this;(force||(width=$el.width())!==me.width)&&(me.width=width,me._arrange(width,index),me.height=$el.height(),me.trigger("width.change"))},_arrange:function(width,index){var item,len,items=this._items,i=0;for(this._slidePos=new Array(items.length),len=items.length;len>i;i++)item=items[i],item.style.cssText+="width:"+width+"px;left:"+i*-width+"px;",item.setAttribute("data-index",i),this._move(i,index>i?-width:i>index?width:0,0);this._container.css("width",width*len)},_move:function(index,dist,speed,immediate){var slidePos=this._slidePos,items=this._items;slidePos[index]!==dist&&items[index]&&(this._translate(index,dist,speed),slidePos[index]=dist,immediate&&items[index].clientLeft)},_translate:function(index,dist,speed){var slide=this._items[index],style=slide&&slide.style;return style?void(style.cssText+=cssPrefix+"transition-duration:"+speed+"ms;"+cssPrefix+"transform: translate("+dist+"px, 0)"+translateZ+";"):!1},_circle:function(index,arr){var len;return arr=arr||this._items,len=arr.length,(index%len+len)%arr.length},_tansitionEnd:function(e){~~e.target.getAttribute("data-index")===this.index&&this.trigger("slideend",this.index)},_slide:function(from,diff,dir,width,speed,opts){var to,me=this;return to=me._circle(from-dir*diff),opts.loop||(dir=Math.abs(from-to)/(from-to)),this._move(to,-dir*width,0,!0),this._move(from,width*dir,speed),this._move(to,0,speed),this.index=to,this.trigger("slide",to,from)},slideTo:function(to,speed){if(this.index===to||this.index===this._circle(to))return this;var opts=this._options,index=this.index,diff=Math.abs(index-to),dir=diff/(index-to),width=this.width;return speed=speed||opts.speed,this._slide(index,diff,dir,width,speed,opts)},prev:function(){return(this._options.loop||this.index>0)&&this.slideTo(this.index-1),this},next:function(){return(this._options.loop||this.index+1<this.length)&&this.slideTo(this.index+1),this},getIndex:function(){return this.index},destroy:function(){return this._container.off(this.eventNs),$(window).off("ortchange"+this.eventNs),this.$super("destroy")}})}(gmu,gmu.$),function(gmu,$){$.extend(!0,gmu.Slider,{template:{dots:'<p class="ui-slider-dots"><%= new Array( len + 1 ).join("<b></b>") %></p>'},options:{dots:!0,selector:{dots:".ui-slider-dots"}}}),gmu.Slider.option("dots",!0,function(){var updateDots=function(to,from){var dots=this._dots;"undefined"==typeof from||gmu.staticCall(dots[from%this.length],"removeClass","ui-state-active"),gmu.staticCall(dots[to%this.length],"addClass","ui-state-active")};this.on("done.dom",function(e,$el,opts){var dots=$el.find(opts.selector.dots);dots.length||(dots=this.tpl2html("dots",{len:this.length}),dots=$(dots).appendTo($el)),this._dots=dots.children().toArray()}),this.on("slide",function(e,to,from){updateDots.call(this,to,from)}),this.on("ready",function(){updateDots.call(this,this.index)})})}(gmu,gmu.$),function(gmu,$,undefined){var isScrolling,start,delta,moved,map={touchstart:"_onStart",touchmove:"_onMove",touchend:"_onEnd",touchcancel:"_onEnd",click:"_onClick"};$.extend(gmu.Slider.options,{stopPropagation:!1,disableScroll:!1}),gmu.Slider.register("touch",{_init:function(){var me=this,$el=me.getEl();me._handler=function(e){return me._options.stopPropagation&&e.stopPropagation(),map[e.type]&&me[map[e.type]].call(me,e)},me.on("ready",function(){$el.on("touchstart"+me.eventNs,me._handler),me._container.on("click"+me.eventNs,me._handler)})},_onClick:function(){return!moved},_onStart:function(e){if(e.touches.length>1)return!1;var num,me=this,touche=e.touches[0],opts=me._options,eventNs=me.eventNs;start={x:touche.pageX,y:touche.pageY,time:+new Date},delta={},moved=!1,isScrolling=undefined,num=opts.viewNum||1,me._move(opts.loop?me._circle(me.index-num):me.index-num,-me.width,0,!0),me._move(opts.loop?me._circle(me.index+num):me.index+num,me.width,0,!0),me.$el.on("touchmove"+eventNs+" touchend"+eventNs+" touchcancel"+eventNs,me._handler)},_onMove:function(e){if(e.touches.length>1||e.scale&&1!==e.scale)return!1;var i,len,pos,slidePos,opts=this._options,viewNum=opts.viewNum||1,touche=e.touches[0],index=this.index;if(opts.disableScroll&&e.preventDefault(),delta.x=touche.pageX-start.x,delta.y=touche.pageY-start.y,"undefined"==typeof isScrolling&&(isScrolling=Math.abs(delta.x)<Math.abs(delta.y)),!isScrolling){for(e.preventDefault(),opts.loop||(delta.x/=!index&&delta.x>0||index===this._items.length-1&&delta.x<0?Math.abs(delta.x)/this.width+1:1),slidePos=this._slidePos,i=index-viewNum,len=index+2*viewNum;len>i;i++)pos=opts.loop?this._circle(i):i,this._translate(pos,delta.x+slidePos[pos],0);moved=!0}},_onEnd:function(){if(this.$el.off("touchmove"+this.eventNs+" touchend"+this.eventNs+" touchcancel"+this.eventNs,this._handler),moved){var speed,diff,i,len,pos,me=this,opts=me._options,viewNum=opts.viewNum||1,index=me.index,slidePos=me._slidePos,duration=+new Date-start.time,absDeltaX=Math.abs(delta.x),isPastBounds=!opts.loop&&(!index&&delta.x>0||index===slidePos.length-viewNum&&delta.x<0),dir=delta.x>0?1:-1;if(250>duration?(speed=absDeltaX/duration,diff=Math.min(Math.round(speed*viewNum*1.2),viewNum)):diff=Math.round(absDeltaX/(me.perWidth||me.width)),diff&&!isPastBounds)me._slide(index,diff,dir,me.width,opts.speed,opts,!0),viewNum>1&&duration>=250&&Math.ceil(absDeltaX/me.perWidth)!==diff&&(me.index<index?me._move(me.index-1,-me.perWidth,opts.speed):me._move(me.index+viewNum,me.width,opts.speed));else for(i=index-viewNum,len=index+2*viewNum;len>i;i++)pos=opts.loop?me._circle(i):i,me._translate(pos,slidePos[pos],opts.speed)}}})}(gmu,gmu.$),function(gmu,$){$.extend(!0,gmu.Slider,{options:{autoPlay:!0,interval:4e3}}),gmu.Slider.register("autoplay",{_init:function(){var me=this;me.on("slideend ready",me.resume).on("destory",me.stop),me.getEl().on("touchstart"+me.eventNs,$.proxy(me.stop,me)).on("touchend"+me.eventNs,$.proxy(me.resume,me))},resume:function(){var me=this,opts=me._options;return opts.autoPlay&&!me._timer&&(me._timer=setTimeout(function(){me.slideTo(me.index+1),me._timer=null},opts.interval)),me},stop:function(){var me=this;return me._timer&&(clearTimeout(me._timer),me._timer=null),me}})}(gmu,gmu.$),function(gmu){gmu.Slider.template.item='<div class="ui-slider-item"><a href="<%= href %>"><img lazyload="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>',gmu.Slider.register("lazyloadimg",{_init:function(){this.on("ready slide",this._loadItems)},_loadItems:function(){var i,len,opts=this._options,loop=opts.loop,viewNum=opts.viewNum||1,index=this.index;for(i=index-viewNum,len=index+2*viewNum;len>i;i++)this.loadImage(loop?this._circle(i):i)},loadImage:function(index){var images,item=this._items[index];return item&&(images=gmu.staticCall(item,"find","img[lazyload]"),images.length)?void images.each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}):this}})}(gmu),/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
function(window,doc){function prefixStyle(style){return""===vendor?style:(style=style.charAt(0).toUpperCase()+style.substr(1),vendor+style)}var m=Math,_bindArr=[],dummyStyle=doc.createElement("div").style,vendor=function(){for(var t,vendors="webkitT,MozT,msT,OT,t".split(","),i=0,l=vendors.length;l>i;i++)if(t=vendors[i]+"ransform",t in dummyStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transitionProperty=prefixStyle("transitionProperty"),transitionDuration=prefixStyle("transitionDuration"),transformOrigin=prefixStyle("transformOrigin"),transitionTimingFunction=prefixStyle("transitionTimingFunction"),isAndroid=(prefixStyle("transitionDelay"),/android/gi.test(navigator.appVersion)),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=!!vendor,hasTransitionEnd=prefixStyle("transition")in dummyStyle,RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",TRNEND_EV=function(){if(vendor===!1)return!1;var transitionEnd={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return transitionEnd[vendor]}(),nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),translateZ=has3d?" translateZ(0)":"",iScroll=function(el,options){var i,that=this;that.wrapper="object"==typeof el?el:doc.getElementById(el),that.wrapper.style.overflow="hidden",that.scroller=that.wrapper.children[0],that.translateZ=translateZ,that.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x,that.y=that.options.y,that.options.useTransform=hasTransform&&that.options.useTransform,that.options.useTransition=hasTransitionEnd&&that.options.useTransition,that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+"transform":"top left",that.scroller.style[transitionDuration]="0",that.scroller.style[transformOrigin]="0 0",that.options.useTransition&&(that.scroller.style[transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)"),that.options.useTransform?that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px)"+translateZ:that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px",that.refresh(),that._bind(RESIZE_EV,window),that._bind(START_EV),that.options.checkDOMChanges&&(that.checkDOMTime=setInterval(function(){that._checkDOMChanges()},500))};iScroll.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:!1,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&0!==e.button)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case TRNEND_EV:that._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_resize:function(){var that=this;setTimeout(function(){that.refresh()},isAndroid?200:0)},_pos:function(x,y){x=this.hScroll?x:0,y=this.vScroll?y:0,this.options.useTransform?this.scroller.style[transform]="translate("+x+"px,"+y+"px) scale("+this.scale+")"+translateZ:(x=m.round(x),y=m.round(y),this.scroller.style.left=x+"px",this.scroller.style.top=y+"px"),this.x=x,this.y=y},_start:function(e){var matrix,x,y,that=this,point=hasTouch?e.touches[0]:e;that.enabled&&(that.options.onBeforeScrollStart&&that.options.onBeforeScrollStart.call(that,e),that.options.useTransition&&that._transitionTime(0),that.moved=!1,that.animating=!1,that.distX=0,that.distY=0,that.absDistX=0,that.absDistY=0,that.dirX=0,that.dirY=0,that.isStopScrollAction=!1,that.options.momentum&&(that.options.useTransform?(matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,"").split(","),x=+matrix[4],y=+matrix[5]):(x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,""),y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")),(m.round(x)!=m.round(that.x)||m.round(y)!=m.round(that.y))&&(that.isStopScrollAction=!0,that.options.useTransition?that._unbind(TRNEND_EV):cancelFrame(that.aniTime),that.steps=[],that._pos(x,y),that.options.onScrollEnd&&that.options.onScrollEnd.call(that))),that.startX=that.x,that.startY=that.y,that.pointX=point.pageX,that.pointY=point.pageY,that.startTime=e.timeStamp||Date.now(),that.options.onScrollStart&&that.options.onScrollStart.call(that,e),that._bind(MOVE_EV,window),that._bind(END_EV,window),that._bind(CANCEL_EV,window))},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();that.options.onBeforeScrollMove&&that.options.onBeforeScrollMove.call(that,e),that.pointX=point.pageX,that.pointY=point.pageY,(newX>0||newX<that.maxScrollX)&&(newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX),(newY>that.minScrollY||newY<that.maxScrollY)&&(newY=that.options.bounce?that.y+deltaY/2:newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY),that.distX+=deltaX,that.distY+=deltaY,that.absDistX=m.abs(that.distX),that.absDistY=m.abs(that.distY),that.absDistX<6&&that.absDistY<6||(that.options.lockDirection&&(that.absDistX>that.absDistY+5?(newY=that.y,deltaY=0):that.absDistY>that.absDistX+5&&(newX=that.x,deltaX=0)),that.moved=!0,that._beforePos?that._beforePos(newY,deltaY)&&that._pos(newX,newY):that._pos(newX,newY),that.dirX=deltaX>0?-1:0>deltaX?1:0,that.dirY=deltaY>0?-1:0>deltaY?1:0,timestamp-that.startTime>300&&(that.startTime=timestamp,that.startX=that.x,that.startY=that.y),that.options.onScrollMove&&that.options.onScrollMove.call(that,e))},_end:function(e){if(!hasTouch||0===e.touches.length){var target,ev,newDuration,that=this,point=hasTouch?e.changedTouches[0]:e,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y;if(that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.onBeforeScrollEnd&&that.options.onBeforeScrollEnd.call(that,e),!that.moved)return hasTouch&&this.options.handleClick&&!that.isStopScrollAction&&(that.doubleTapTimer=setTimeout(function(){for(that.doubleTapTimer=null,target=point.target;1!=target.nodeType;)target=target.parentNode;"SELECT"!=target.tagName&&"INPUT"!=target.tagName&&"TEXTAREA"!=target.tagName&&(ev=doc.createEvent("MouseEvents"),ev.initMouseEvent("click",!0,!0,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),ev._fake=!0,target.dispatchEvent(ev))},0)),that._resetPos(400),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));if(300>duration&&that.options.momentum&&(momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX,momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0,that.options.bounce?that.wrapperH:0):momentumY,newPosX=that.x+momentumX.dist,newPosY=that.y+momentumY.dist,(that.x>0&&newPosX>0||that.x<that.maxScrollX&&newPosX<that.maxScrollX)&&(momentumX={dist:0,time:0}),(that.y>that.minScrollY&&newPosY>that.minScrollY||that.y<that.maxScrollY&&newPosY<that.maxScrollY)&&(momentumY={dist:0,time:0})),momentumX.dist||momentumY.dist)return newDuration=m.max(m.max(momentumX.time,momentumY.time),10),that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e)}},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;return resetX==that.x&&resetY==that.y?void(that.moved&&(that.moved=!1,that.options.onScrollEnd&&that.options.onScrollEnd.call(that),that._afterPos&&that._afterPos())):void that.scrollTo(resetX,resetY,time||0)},_transitionEnd:function(e){var that=this;e.target==that.scroller&&(that._unbind(TRNEND_EV),that._startAni())},_startAni:function(){var step,easeOut,animate,that=this,startX=that.x,startY=that.y,startTime=Date.now();if(!that.animating){if(!that.steps.length)return void that._resetPos(400);if(step=that.steps.shift(),step.x==startX&&step.y==startY&&(step.time=0),that.animating=!0,that.moved=!0,that.options.useTransition)return that._transitionTime(step.time),that._pos(step.x,step.y),that.animating=!1,void(step.time?that._bind(TRNEND_EV):that._resetPos(0));animate=function(){var newX,newY,now=Date.now();return now>=startTime+step.time?(that._pos(step.x,step.y),that.animating=!1,that.options.onAnimationEnd&&that.options.onAnimationEnd.call(that),void that._startAni()):(now=(now-startTime)/step.time-1,easeOut=m.sqrt(1-now*now),newX=(step.x-startX)*easeOut+startX,newY=(step.y-startY)*easeOut+startY,that._pos(newX,newY),void(that.animating&&(that.aniTime=nextFrame(animate))))},animate()}},_transitionTime:function(time){time+="ms",this.scroller.style[transitionDuration]=time},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)*(this.options.speedScale||1)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;return dist>0&&newDist>maxDistUpper?(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistUpper+=outsideDist,speed=speed*maxDistUpper/newDist,newDist=maxDistUpper):0>dist&&newDist>maxDistLower&&(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistLower+=outsideDist,speed=speed*maxDistLower/newDist,newDist=maxDistLower),newDist*=0>dist?-1:1,newTime=speed/deceleration,{dist:newDist,time:m.round(newTime)}},_offset:function(el){for(var left=-el.offsetLeft,top=-el.offsetTop;el=el.offsetParent;)left-=el.offsetLeft,top-=el.offsetTop;return el!=this.wrapper&&(left*=this.scale,top*=this.scale),{left:left,top:top}},_bind:function(type,el,bubble){_bindArr.concat([el||this.scroller,type,this]),(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[transform]="",that._unbind(RESIZE_EV,window),that._unbind(START_EV),that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.useTransition&&that._unbind(TRNEND_EV),that.options.checkDOMChanges&&clearInterval(that.checkDOMTime),that.options.onDestroy&&that.options.onDestroy.call(that);for(var i=0,l=_bindArr.length;l>i;)_bindArr[i].removeEventListener(_bindArr[i+1],_bindArr[i+2]),_bindArr[i]=null,i+=3;_bindArr=[]},refresh:function(){var offset,that=this;that.wrapperW=that.wrapper.clientWidth||1,that.wrapperH=that.wrapper.clientHeight||1,that.minScrollY=-that.options.topOffset||0,that.scrollerW=m.round(that.scroller.offsetWidth*that.scale),that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale),that.maxScrollX=that.wrapperW-that.scrollerW,that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY,that.dirX=0,that.dirY=0,that.options.onRefresh&&that.options.onRefresh.call(that),that.hScroll=that.options.hScroll&&that.maxScrollX<0,that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH),offset=that._offset(that.wrapper),that.wrapperOffsetLeft=-offset.left,that.wrapperOffsetTop=-offset.top,that.scroller.style[transitionDuration]="0",that._resetPos(400)},scrollTo:function(x,y,time,relative){var i,l,that=this,step=x;for(that.stop(),step.length||(step=[{x:x,y:y,time:time,relative:relative}]),i=0,l=step.length;l>i;i++)step[i].relative&&(step[i].x=that.x-step[i].x,step[i].y=that.y-step[i].y),that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});that._startAni()},scrollToElement:function(el,time){var pos,that=this;el=el.nodeType?el:that.scroller.querySelector(el),el&&(pos=that._offset(el),pos.left+=that.wrapperOffsetLeft,pos.top+=that.wrapperOffsetTop,pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left,pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top,time=void 0===time?m.max(2*m.abs(pos.left),2*m.abs(pos.top)):time,that.scrollTo(pos.left,pos.top,time))},scrollToPage:function(pageX,pageY,time){var x,y,that=this;time=void 0===time?400:time,that.options.onScrollStart&&that.options.onScrollStart.call(that),x=-that.wrapperW*pageX,y=-that.wrapperH*pageY,x<that.maxScrollX&&(x=that.maxScrollX),y<that.maxScrollY&&(y=that.maxScrollY),that.scrollTo(x,y,time)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(MOVE_EV,window),this._unbind(END_EV,window),this._unbind(CANCEL_EV,window)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(TRNEND_EV):cancelFrame(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},isReady:function(){return!this.moved&&!this.animating}},dummyStyle=null,"undefined"!=typeof exports?exports.iScroll=iScroll:window.iScroll=iScroll,function($,ns,undefined){if($){var iScroll,_iScroll=ns.iScroll,slice=[].slice,record=function(){var data={},id=0,ikey="_sid";return function(obj,val){var key=obj[ikey]||(obj[ikey]=++id);return val!==undefined&&(data[key]=val),null===val&&delete data[key],data[key]}}();ns.iScroll=iScroll=function(el,options){var ins=([].slice.call(arguments,0),new _iScroll(el,options));return record(el,ins),ins},iScroll.prototype=_iScroll.prototype,$.fn.iScroll=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el)||iScroll(el,$.isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("iScroll没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this}}}(window.Zepto||null,window)}(window,document),function($){function dismiss(){var cls=$el.attr("hl-cls");clearTimeout(timer),$el.removeClass(cls).removeAttr("hl-cls"),$el=null,$doc.off("touchend touchmove touchcancel",dismiss)}var $el,timer,$doc=$(document);$.fn.highlight=function(className,selector){return this.each(function(){var $this=$(this);$this.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),className&&$this.on("touchstart.hl",function(e){var match;$el=selector?(match=$(e.target).closest(selector,this))&&match.length&&match:$this,$el&&($el.attr("hl-cls",className),timer=setTimeout(function(){$el.addClass(className)},100),$doc.on("touchend touchmove touchcancel",dismiss))})})}}(Zepto),function(gmu,$,undefined){gmu.define("Navigator",{options:{content:null,event:"click"},template:{list:"<ul>",item:'<li><a<% if( href ) { %> href="<%= href %>"<% } %>><%= text %></a></li>'},_create:function(){var renderer,html,me=this,opts=me._options,$el=me.getEl(),$list=$el.find("ul").first(),name="ui-"+me.widgetName;!$list.length&&opts.content?($list=$(me.tpl2html("list")),renderer=me.tpl2html("item"),html="",opts.content.forEach(function(item){item=$.extend({href:"",text:""},"string"==typeof item?{text:item}:item),html+=renderer(item)}),$list.append(html).appendTo($el)):($el.is("ul, ol")&&($list=$el.wrap("<div>"),$el=$el.parent()),opts.index===undefined&&(opts.index=$list.find(".ui-state-active").index(),~opts.index||(opts.index=0))),me.$list=$list.addClass(name+"-list"),me.trigger("done.dom",$el.addClass(name),opts),$list.highlight("ui-state-hover","li"),$list.on(opts.event+me.eventNs,"li:not(.ui-state-disable)>a",function(e){me._switchTo($(this).parent().index(),e)}),me.index=-1,me.switchTo(opts.index)},_switchTo:function(to,e){if(to!==this.index){var cur,me=this,list=me.$list.children(),evt=gmu.Event("beforeselect",e);if(me.trigger(evt,list.get(to)),!evt.isDefaultPrevented())return cur=list.removeClass("ui-state-active").eq(to).addClass("ui-state-active"),me.index=to,me.trigger("select",to,cur[0])}},switchTo:function(to){return this._switchTo(~~to)},unselect:function(){this.index=-1,this.$list.children().removeClass("ui-state-active")},getIndex:function(){return this.index}})}(gmu,gmu.$),function(gmu,$,undefined){gmu.Navigator.options.isScrollToNext=!0,gmu.Navigator.option("isScrollToNext",!0,function(){var prevIndex,me=this;me.on("select",function(e,to,el){prevIndex===undefined&&(prevIndex=me.index?0:1);var listOffset,dir=to>prevIndex,target=$(el)[dir?"next":"prev"](),offset=target.offset()||$(el).offset(),within=me.$el.offset();(dir?offset.left+offset.width>within.left+within.width:offset.left<within.left)&&(listOffset=me.$list.offset(),me.$el.iScroll("scrollTo",dir?within.width-offset.left+listOffset.left-offset.width:listOffset.left-offset.left,0,400)),prevIndex=to})})}(gmu,gmu.$),function(gmu,$){gmu.Navigator.options.iScroll={hScroll:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1},gmu.Navigator.register("scrollable",{_init:function(){var me=this,opts=me._options;me.on("done.dom",function(){me.$list.wrap('<div class="ui-scroller"></div>'),me.trigger("init.iScroll"),me.$el.iScroll($.extend({},opts.iScroll))}),$(window).on("ortchange"+me.eventNs,$.proxy(me.refresh,me)),me.on("destroy",function(){me.$el.iScroll("destroy"),$(window).off("ortchange"+me.eventNs)})},refresh:function(){this.trigger("refresh.iScroll").$el.iScroll("refresh")}})}(gmu,gmu.$),function(gmu,$,undefined){gmu.Navigator.options.isScrollToNext=!0,gmu.Navigator.option("isScrollToNext",!0,function(){var prevIndex,me=this;me.on("select",function(e,to,el){prevIndex===undefined&&(prevIndex=me.index?0:1);var listOffset,dir=to>prevIndex,target=$(el)[dir?"next":"prev"](),offset=target.offset()||$(el).offset(),within=me.$el.offset();(dir?offset.left+offset.width>within.left+within.width:offset.left<within.left)&&(listOffset=me.$list.offset(),me.$el.iScroll("scrollTo",dir?within.width-offset.left+listOffset.left-offset.width:listOffset.left-offset.left,0,400)),prevIndex=to})})}(gmu,gmu.$);
//# sourceMappingURL=gmu.part.js.map